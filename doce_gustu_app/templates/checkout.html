{% extends "base.html" %}

{% block miolo %}
<div class="container my-5">
    <div class="row">
        <!-- Resumo do Pedido -->
        <div class="col-md-5">
            <h4 class="mb-4">Resumo do Pedido</h4>
            {% for item in itens_carrinho %}
            <div class="d-flex justify-content-between mb-2">
                <span>{{ item.quantidade }}x {{ item.produto.nome }}</span>
                <span>R$ {{ item.subtotal }}</span>
            </div>
            {% endfor %}
            <hr>
            <div class="d-flex justify-content-between fw-bold">
                <span>Total:</span>
                <span>R$ {{ total_carrinho }}</span>
            </div>
        </div>

        <!-- Formulário de Finalização -->
        <div class="col-md-7">
            <h4 class="mb-4">Finalizar Pedido</h4>
            
            <!-- Escolha de Endereço -->
            <div class="mb-4">
                <h5>Endereço de Entrega</h5>
                {% for endereco in enderecos %}
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="endereco" value="{{ endereco.id }}" {% if forloop.first %}checked{% endif %}>
                    <label class="form-check-label">
                        <strong>{{ endereco.apelido }}</strong> - {{ endereco.rua }}, {{ endereco.numero }}
                    </label>
                </div>
                {% endfor %}
            </div>

            <!-- Forma de Pagamento -->
            <div class="mb-4">
                <h5>Forma de Pagamento</h5>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="pagamento" value="dinheiro" checked>
                    <label class="form-check-label">Dinheiro (troco para?)</label>
                </div>
                <div class="form-check mb-2">
                    <input class="form-check-input" type="radio" name="pagamento" value="pix">
                    <label class="form-check-label">PIX</label>
                </div>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="pagamento" value="cartao">
                    <label class="form-check-label">Cartão na Entrega</label>
                </div>
            </div>

            <button class="btn btn-primary btn-lg w-100">Finalizar Pedido</button>
        </div>
    </div>
</div>
{% endblock %}